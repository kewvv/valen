<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Valentin?</title>
    <meta name="description" content="Willst du mein Valentin sein?" />
    <style>
        :root{
            --bg1:#0b1020;
            --bg2:#1a0b24;
            --card: rgba(255,255,255,.08);
            --card2: rgba(255,255,255,.06);
            --text: rgba(255,255,255,.92);
            --muted: rgba(255,255,255,.72);
            --accent:#ff4d8d;
            --accent2:#ff2d55;
            --green:#35d07f;
            --shadow: 0 20px 70px rgba(0,0,0,.45);
            --radius: 22px;
        }

        *{ box-sizing: border-box; }
        html, body { height: 100%; }
        body{
            margin:0;
            font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
            color: var(--text);
            background: radial-gradient(1200px 900px at 30% 20%, rgba(255,77,141,.18), transparent 55%),
            radial-gradient(900px 700px at 80% 70%, rgba(87,255,199,.10), transparent 55%),
            linear-gradient(135deg, var(--bg1), var(--bg2));
            overflow: hidden; /* hearts stay inside viewport */
        }

        /* Floating hearts layer */
        #hearts-layer{
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        /* Subtle vignette */
        .vignette{
            position: fixed;
            inset: 0;
            pointer-events:none;
            background: radial-gradient(1200px 900px at 50% 40%, transparent 55%, rgba(0,0,0,.45) 100%);
            z-index: 1;
        }

        /* Main layout */
        .wrap{
            position: relative;
            min-height: 100%;
            display: grid;
            place-items: center;
            padding: 20px;
            z-index: 2;
        }

        .card{
            width: min(560px, 92vw);
            background: linear-gradient(180deg, var(--card), var(--card2));
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,.12);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: clamp(18px, 4vw, 28px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .card::before{
            content:"";
            position:absolute;
            inset:-2px;
            background: radial-gradient(600px 240px at 50% -20%, rgba(255,77,141,.22), transparent 60%);
            z-index: -1;
        }

        h1{
            margin: 6px 0 10px;
            font-size: clamp(22px, 5.2vw, 34px);
            letter-spacing: -0.02em;
        }
        p{
            margin: 0 0 16px;
            color: var(--muted);
            font-size: clamp(14px, 3.6vw, 16px);
            line-height: 1.4;
        }

        /* Central heart */
        .big-heart{
            display: grid;
            place-items: center;
            margin: 10px auto 16px;
            width: 140px;
            height: 140px;
            transform: translateZ(0);
            will-change: transform, filter;
        }

        .big-heart .heart{
            font-size: 92px;
            line-height: 1;
            transform-origin: center;
            filter: drop-shadow(0 12px 18px rgba(255,45,85,.22));
            animation: thump 1.4s ease-in-out infinite;
            user-select: none;
        }

        @keyframes thump{
            0%, 100% { transform: scale(1); }
            30% { transform: scale(1.08); }
            55% { transform: scale(0.98); }
        }

        /* Buttons */
        .btns{
            display: flex;
            gap: 12px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 6px;
        }

        button{
            appearance: none;
            border: none;
            cursor: pointer;
            border-radius: 14px;
            padding: 12px 16px;
            font-weight: 700;
            font-size: 16px;
            min-width: 140px;
            transition: transform .12s ease, box-shadow .12s ease, filter .12s ease, opacity .2s ease;
            user-select: none;
            touch-action: manipulation;
        }

        .btn-yes{
            background: linear-gradient(180deg, rgba(255,77,141,1), rgba(255,45,85,1));
            color: white;
            box-shadow: 0 10px 26px rgba(255,45,85,.35);
        }

        .btn-no{
            background: rgba(255,255,255,.10);
            color: rgba(255,255,255,.9);
            border: 1px solid rgba(255,255,255,.16);
            box-shadow: 0 8px 18px rgba(0,0,0,.28);
        }

        button:active{ transform: translateY(1px) scale(0.99); }

        .btn-yes.pulse{
            animation: yesPulse 1s ease-in-out infinite;
        }

        @keyframes yesPulse{
            0%,100%{ transform: scale(1); filter: saturate(1); }
            50%{ transform: scale(1.06); filter: saturate(1.25) brightness(1.05); }
        }

        /* Status / Counter */
        .status{
            margin-top: 14px;
            font-size: 13px;
            color: rgba(255,255,255,.68);
        }
        .status strong{ color: rgba(255,255,255,.9); }

        /* Success view */
        .success{
            display:none;
        }
        .success.show{ display:block; }
        .question.hide{ display:none; }

        .success h2{
            margin: 4px 0 8px;
            font-size: clamp(22px, 5.2vw, 32px);
            letter-spacing: -0.02em;
        }
        .success .badge{
            display:inline-flex;
            align-items:center;
            gap:10px;
            padding: 10px 14px;
            border-radius: 999px;
            background: rgba(53,208,127,.14);
            border: 1px solid rgba(53,208,127,.22);
            color: rgba(255,255,255,.92);
            font-weight: 700;
            margin-top: 8px;
        }

        /* Floating heart particles */
        .float-heart{
            position: absolute;
            left: 50%;
            top: 85%;
            transform: translate(-50%, 0) scale(1);
            font-size: 18px;
            opacity: 0;
            will-change: transform, opacity;
            filter: drop-shadow(0 10px 18px rgba(255,45,85,.25));
            animation: floatUp var(--dur) ease-in forwards;
        }

        @keyframes floatUp{
            0%{
                opacity: 0;
                transform: translate(var(--x), 30px) scale(var(--s)) rotate(var(--r));
            }
            12%{ opacity: 1; }
            100%{
                opacity: 0;
                transform: translate(calc(var(--x) * 1.2), calc(-1 * var(--y))) scale(calc(var(--s) * 1.05)) rotate(calc(var(--r) * 1.6));
            }
        }

        /* Confetti-ish hearts for success */
        .burst-heart{
            position: absolute;
            left: 50%;
            top: 45%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            opacity: 0;
            will-change: transform, opacity;
            animation: burst var(--dur) cubic-bezier(.2,.8,.2,1) forwards;
            filter: drop-shadow(0 12px 20px rgba(255,77,141,.25));
        }

        @keyframes burst{
            0%{
                opacity: 0;
                transform: translate(-50%, -50%) translate(0,0) scale(.6) rotate(0deg);
            }
            12%{ opacity: 1; }
            100%{
                opacity: 0;
                transform: translate(-50%, -50%) translate(var(--bx), var(--by)) scale(var(--bs)) rotate(var(--br));
            }
        }

        /* Small helpers */
        .sr-only{
            position:absolute;
            width:1px;height:1px;
            padding:0;margin:-1px;
            overflow:hidden;clip:rect(0,0,0,0);
            white-space:nowrap;border:0;
        }

        /* Better mobile tap comfort */
        @media (max-width: 420px){
            button{ min-width: 132px; }
            .big-heart{ width: 120px; height: 120px; }
            .big-heart .heart{ font-size: 82px; }
        }

        /* Reduce motion support */
        @media (prefers-reduced-motion: reduce){
            .big-heart .heart{ animation: none; }
            .btn-yes.pulse{ animation: none; }
            .float-heart, .burst-heart{ animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; }
        }
    </style>
</head>
<body>
<!-- Hearts overlay -->
<div id="hearts-layer" aria-hidden="true"></div>
<div class="vignette" aria-hidden="true"></div>

<main class="wrap">
    <section class="card" role="region" aria-label="Valentin Frage">
        <!-- QUESTION VIEW -->
        <div class="question" id="questionView">
            <h1>Willst du mein Valentin sein?</h1>
            <p>Ganz ehrlich: ich hoffe auf <strong>Ja</strong>‚Ä¶ aber du darfst nat√ºrlich klicken üòÑ</p>

            <div class="big-heart" aria-hidden="true">
                <div class="heart" id="centralHeart">‚ù§Ô∏è</div>
            </div>

            <div class="btns">
                <button class="btn-yes" id="yesBtn" type="button">Ja üíñ</button>
                <button class="btn-no" id="noBtn" type="button">Nein üôà</button>
            </div>

            <div class="status" id="statusText" aria-live="polite">
                Nein-Klicks: <strong id="noCount">0</strong> / 14
            </div>
        </div>

        <!-- SUCCESS VIEW -->
        <div class="success" id="successView" aria-live="polite">
            <h2>Yeeeesss! üíû</h2>
            <p>Okay, offiziell: Du bist mein Valentin. (Und das Herz hat‚Äôs schon geahnt.)</p>
            <div class="badge">‚ú® Mission erf√ºllt: Valentins-Date aktiviert ‚ú®</div>

            <div style="height:16px"></div>
            <p style="margin-bottom:0; color:rgba(255,255,255,.72); font-size:14px;">
                Screenshot machen & schicken? üòÑ
            </p>
        </div>
    </section>
</main>

<script>
    (function () {
        "use strict";

        // ====== CONFIG ======
        const MAX_NO = 14;              // Schwelle exakt 14
        const BASE_HEART_SCALE = 1.0;   // Startgr√∂√üe zentrales Herz
        const SCALE_STEP = 0.10;        // Wachstum pro "Nein"
        const HEARTS_PER_NO = 8;        // kleine Herzen pro Klick (wird sp√§ter gesteigert)
        const HEARTS_LAYER = document.getElementById("hearts-layer");

        // ====== STATE ======
        let noClicks = 0;
        let accepted = false;

        // ====== ELEMENTS ======
        const centralHeart = document.getElementById("centralHeart");
        const yesBtn = document.getElementById("yesBtn");
        const noBtn = document.getElementById("noBtn");
        const noCountEl = document.getElementById("noCount");
        const statusText = document.getElementById("statusText");
        const questionView = document.getElementById("questionView");
        const successView = document.getElementById("successView");

        // ====== HELPERS ======
        function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }
        function rand(min, max) { return Math.random() * (max - min) + min; }
        function pick(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

        function updateUI() {
            noCountEl.textContent = String(noClicks);

            // Zentrales Herz skalieren
            const scale = BASE_HEART_SCALE + noClicks * SCALE_STEP;
            centralHeart.style.transform = `scale(${scale.toFixed(3)})`;

            // "Ja" wird attraktiver/auff√§lliger
            // (mehr Gr√∂√üe + Pulse ab ein paar Neins)
            const yesScale = 1 + noClicks * 0.03;
            yesBtn.style.transform = `scale(${yesScale.toFixed(3)})`;
            yesBtn.style.boxShadow = `0 10px ${26 + noClicks * 2}px rgba(255,45,85,${0.35 + noClicks * 0.02})`;

            if (noClicks >= 3) {
                yesBtn.classList.add("pulse");
            } else {
                yesBtn.classList.remove("pulse");
            }

            // Nach 14 "Nein": Nein verschwindet, Herzen dominieren
            if (noClicks >= MAX_NO) {
                noBtn.style.opacity = "0";
                noBtn.style.pointerEvents = "none";
                noBtn.setAttribute("aria-hidden", "true");
                statusText.innerHTML = `Okay‚Ä¶ jetzt gibt‚Äôs nur noch <strong>Ja</strong> üòå`;
            }
        }

        function spawnFloatingHearts(count, intensityFactor) {
            // intensityFactor erh√∂ht "Dominanz": mehr Herzen, gr√∂√üere Streuung, mehr Variationen
            const palette = ["‚ù§Ô∏è", "üíñ", "üíó", "üíò", "üíï", "üíì", "üíû"];
            const durBase = clamp(2600 - intensityFactor * 60, 1200, 2600);

            const vw = window.innerWidth;
            const vh = window.innerHeight;

            for (let i = 0; i < count; i++) {
                const el = document.createElement("div");
                el.className = "float-heart";
                el.textContent = pick(palette);

                // Zuf√§llige Startposition entlang der unteren H√§lfte (mehr "Overlay"-Feeling)
                const startX = rand(0.05, 0.95) * vw;
                const startY = rand(0.55, 0.98) * vh;

                // Flugbahn
                const x = (rand(-1, 1) * (80 + intensityFactor * 10)).toFixed(0) + "px";
                const y = (rand(180, 520) + intensityFactor * 18).toFixed(0) + "px";
                const s = rand(0.8, 1.6 + intensityFactor * 0.03).toFixed(2);
                const r = rand(-30, 30).toFixed(0) + "deg";
                const dur = (durBase + rand(-500, 700)).toFixed(0) + "ms";

                el.style.left = startX + "px";
                el.style.top = startY + "px";
                el.style.setProperty("--x", x);
                el.style.setProperty("--y", y);
                el.style.setProperty("--s", s);
                el.style.setProperty("--r", r);
                el.style.setProperty("--dur", dur);

                HEARTS_LAYER.appendChild(el);

                // Cleanup
                const cleanupMs = parseInt(dur, 10) + 200;
                window.setTimeout(() => el.remove(), cleanupMs);
            }
        }

        function floodHeartsForFinale() {
            // Extra viele Herzen, damit "Rest der Seite von Herzen dominiert"
            // Kurz als Welle + danach ein paar Nachz√ºgler.
            const waves = [
                { n: 80, delay: 0 },
                { n: 90, delay: 260 },
                { n: 100, delay: 520 },
                { n: 110, delay: 820 }
            ];

            waves.forEach(w => {
                window.setTimeout(() => spawnFloatingHearts(w.n, 18), w.delay);
            });

            // Leichter "Dauerregen" f√ºr ~2 Sekunden
            const start = Date.now();
            const rain = window.setInterval(() => {
                if (Date.now() - start > 2000) {
                    clearInterval(rain);
                    return;
                }
                spawnFloatingHearts(18, 16);
            }, 180);
        }

        function burstSuccessHearts() {
            // "Konfetti" als Herz-Burst ohne externe Libs
            const palette = ["üíñ","üíò","üíù","üíó","üíï","üíì","üíû","‚ù§Ô∏è"];
            const bursts = 120;

            for (let i = 0; i < bursts; i++) {
                const el = document.createElement("div");
                el.className = "burst-heart";
                el.textContent = pick(palette);

                const angle = rand(0, Math.PI * 2);
                const dist = rand(60, 340);
                const bx = Math.cos(angle) * dist;
                const by = Math.sin(angle) * dist;
                const bs = rand(0.9, 1.9);
                const br = rand(-180, 180) + "deg";
                const dur = rand(1200, 2200).toFixed(0) + "ms";

                el.style.setProperty("--bx", bx.toFixed(0) + "px");
                el.style.setProperty("--by", by.toFixed(0) + "px");
                el.style.setProperty("--bs", bs.toFixed(2));
                el.style.setProperty("--br", br);
                el.style.setProperty("--dur", dur);

                HEARTS_LAYER.appendChild(el);
                window.setTimeout(() => el.remove(), parseInt(dur, 10) + 250);
            }
        }

        function showSuccess() {
            if (accepted) return;
            accepted = true;

            // View switch ohne Reload
            questionView.classList.add("hide");
            successView.classList.add("show");

            // Massive Herzen + Burst
            spawnFloatingHearts(80, 14);
            window.setTimeout(() => spawnFloatingHearts(120, 18), 220);
            window.setTimeout(() => burstSuccessHearts(), 120);

            // Optional: Hintergrund-Herzregen f√ºr kurze Zeit
            const start = Date.now();
            const timer = window.setInterval(() => {
                if (Date.now() - start > 2800) {
                    clearInterval(timer);
                    return;
                }
                spawnFloatingHearts(24, 14);
            }, 220);
        }

        // ====== EVENTS ======
        yesBtn.addEventListener("click", () => {
            showSuccess();
        });

        noBtn.addEventListener("click", () => {
            if (accepted) return;

            noClicks = clamp(noClicks + 1, 0, MAX_NO);
            updateUI();

            // Herzen spawnen: pro Nein mehr Intensit√§t
            const intensity = noClicks; // 1..14
            const count = HEARTS_PER_NO + Math.floor(intensity * 1.2);
            spawnFloatingHearts(count, intensity);

            // Bei Finale (14): "Nein" weg + Bildschirm voll Herzen
            if (noClicks >= MAX_NO) {
                floodHeartsForFinale();
            }
        });

        // Erste UI-Initialisierung
        updateUI();

        // Optional: ein paar dezente Herzen beim Laden (leicht)
        window.setTimeout(() => spawnFloatingHearts(12, 2), 350);
    })();
</script>
</body>
</html>
